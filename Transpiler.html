

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transpiler module &mdash; tidowa  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> tidowa
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="start.html">First steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#discretization">Discretization</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#code-generation">Code Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#compilation">Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#execution">Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#first-steps">First steps</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tidowa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Transpiler module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Transpiler.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-Transpiler">
<span id="transpiler-module"></span><h1>Transpiler module<a class="headerlink" href="#module-Transpiler" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="Transpiler.Transpiler">
<em class="property">class </em><code class="sig-prename descclassname">Transpiler.</code><code class="sig-name descname">Transpiler</code><span class="sig-paren">(</span><em class="sig-param">record</em>, <em class="sig-param">output_directory='../data/exec/output'</em>, <em class="sig-param">data_type='float'</em>, <em class="sig-param">code_output_directory=None</em>, <em class="sig-param">loop_type='config'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Transpiler.html#Transpiler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Transpiler.Transpiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Abstract template for transpilers generating code for a specific language.</p>
<p>This class is an abstract template. Subclasses are required to implement the following functions:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">generate()</span></code></dt><dd><p>This method should implement the code generation of the transpiler in the corresponding language.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">generate_loop(curr_eq,</span> <span class="pre">loop_type,</span> <span class="pre">loop_iterations,</span> <span class="pre">condition)</span></code></dt><dd><p>Generate a string of code representing the specific loop with the code for <code class="docutils literal notranslate"><span class="pre">curr_eq</span></code> as the loop body.</p>
</dd>
</dl>
</li>
</ul>
<dl class="method">
<dt id="Transpiler.Transpiler.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">record</em>, <em class="sig-param">output_directory='../data/exec/output'</em>, <em class="sig-param">data_type='float'</em>, <em class="sig-param">code_output_directory=None</em>, <em class="sig-param">loop_type='config'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Transpiler.html#Transpiler.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Transpiler.Transpiler.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Base constructor for Transpiler objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>types.ModuleType</em>) – Module containing the discretized ODE system.</p></li>
<li><p><strong>output_directory</strong> (<em>str</em>) – Path of the directory of the default file for the integrated solution.
Default is ‘../data/exec/output’.</p></li>
<li><p><strong>data_type</strong> (<em>str</em>) – Datatype that should be used in the code. Default is ‘float’.</p></li>
<li><p><strong>code_output_directory</strong> (<em>str</em>) – Path to the directory where the generated code files should be saved.
Default is None.</p></li>
<li><p><strong>loop_type</strong> (<em>str</em>) – Type of the loop used for iteration in implicit integration methods (ignored otherwise).
Default is ‘config’. Other possibilities: ‘for’, ‘both’, ‘while’, ‘counter’.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Transpiler.Transpiler.generate">
<em class="property">abstract </em><code class="sig-name descname">generate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/Transpiler.html#Transpiler.generate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Transpiler.Transpiler.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an abstract method, which has to be implemented by every subclass of Transpiler. This method should
implement the code generation of the various transpilers in their corresponding language.</p>
</dd></dl>

<dl class="method">
<dt id="Transpiler.Transpiler.generate_loop">
<em class="property">abstract </em><code class="sig-name descname">generate_loop</code><span class="sig-paren">(</span><em class="sig-param">curr_eq</em>, <em class="sig-param">loop_type</em>, <em class="sig-param">loop_iterations</em>, <em class="sig-param">condition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Transpiler.html#Transpiler.generate_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Transpiler.Transpiler.generate_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate code to implement the loop specified in the parameters.</p>
<p>The generated loop is a loop of type <code class="docutils literal notranslate"><span class="pre">loop_type</span></code> with a loop condition depending on <code class="docutils literal notranslate"><span class="pre">loop_iterations</span></code> and <code class="docutils literal notranslate"><span class="pre">condition</span></code>
and <code class="docutils literal notranslate"><span class="pre">loop_content</span></code> as the body.
This is an abstract method, which has to be implemented by every subclass of Transpiler. This method should
implement the code generation for iterative equations in the corresponding language.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loop_content</strong> (<em>sympy.codegen.ast.While</em>) – Sympy while loop with the loop body being a block containing sympy expressions.</p></li>
<li><p><strong>loop_type</strong> (<em>str</em>) – Type of the generated loop.</p></li>
<li><p><strong>loop_iterations</strong> (<em>int</em>) – Number of times the loop will be executed (if it is iterative).</p></li>
<li><p><strong>condition</strong> (<em>sympy.logic.boolalg.Boolean</em>) – Sympy expression for the iteration condition of the loop (if applicable), e.g. i&lt;5.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string with the code.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Transpiler.Transpiler.implement_approximation_loop">
<code class="sig-name descname">implement_approximation_loop</code><span class="sig-paren">(</span><em class="sig-param">curr_eq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Transpiler.html#Transpiler.implement_approximation_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Transpiler.Transpiler.implement_approximation_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate code for a loop containing curr_eq.</p>
<p>The generated loop is a loop of type <code class="docutils literal notranslate"><span class="pre">loop_type</span></code> with a loop condition depending on <code class="docutils literal notranslate"><span class="pre">loop_iterations</span></code> and <code class="docutils literal notranslate"><span class="pre">condition</span></code>
and <code class="docutils literal notranslate"><span class="pre">loop_content</span></code> as the body.
Requires an implementation of the method <code class="docutils literal notranslate"><span class="pre">generate_loop(self,</span> <span class="pre">curr_eq,</span> <span class="pre">loop_type,</span> <span class="pre">loop_iterations,</span> <span class="pre">condition)</span></code>.
Uses the Transpiler attribute <code class="docutils literal notranslate"><span class="pre">self.rec.loop_type</span></code> to determine the type of the loop (options: ‘for’, ‘while’, ‘both’, ‘counter’).</p>
<dl class="simple">
<dt>Explanation of the loop types:</dt><dd><ul class="simple">
<li><p>‘for’ | ‘forX’: For loop over (default | X) iterations.</p></li>
<li><p>‘while’: While loop.</p></li>
<li><p>‘both’ | ‘bothX’:  While loop with an additional maximum number of iterations given by (default | X).</p></li>
<li><p>‘counter’ | ‘counterX’: A while-loop implementation of a for loop over (default | X) iterations.</p></li>
</ul>
</dd>
</dl>
<p>If no valid loop type is given, for-loops are used.</p>
<dl class="simple">
<dt>Default values:</dt><dd><ul class="simple">
<li><p>Number of iterations: 3</p></li>
<li><p>Error threshold for convergence: 1e-8</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>curr_eq</strong> (<em>sympy.codegen.ast.While</em>) – Sympy while loop with the loop body being a sympy expression. The loop condition is ignored and replaced by the function parameter.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string with code, which is equivalent to a loop of type loop_type with a loop condition depending on loop_iterations and condition and loop_content as the body.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Anna Mittermair

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>